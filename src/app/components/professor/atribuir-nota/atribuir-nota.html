<div class="form-container">
    <h2>Lançar Nota</h2>
    <form (ngSubmit)="onSubmit()" #notaForm="ngForm">
        <div class="form-group">
            <label for="disciplina">Disciplina:</label>
            <!-- Inverti a ordem: Primeiro seleciona disciplina, depois aluno -->
            <select id="disciplina" name="disciplina" [(ngModel)]="form.disciplinaId" (change)="onDisciplinaChange()" required>
                <option value="" disabled selected>Selecione a disciplina</option>
                <option *ngFor="let disciplina of disciplinas" [value]="disciplina.id">{{ disciplina.nome }}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="aluno">Aluno:</label>
            <select id="aluno" name="aluno" [(ngModel)]="form.alunoId" required [disabled]="!form.disciplinaId">
                <option value="" disabled selected>Selecione o aluno</option>
                <option *ngFor="let aluno of alunos" [value]="aluno.id">{{ aluno.nome }}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="nota">Nota (0-10):</label>
            <input type="number" id="nota" name="nota" [(ngModel)]="form.nota" required min="0" max="10" step="0.1">
        </div>

        <div class="form-group">
            <input type="submit" value="Lançar Nota" [disabled]="!notaForm.form.valid">
        </div>

        <div *ngIf="successMessage" class="success-message">
            {{ successMessage }}
        </div>
        <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
        </div>
    </form>
</div>
